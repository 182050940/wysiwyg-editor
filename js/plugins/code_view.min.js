/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */

!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t)}:n(window.jQuery)}(function(m){m.extend(m.FE.DEFAULTS,{codeMirror:window.CodeMirror,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),m.FE.PLUGINS.codeView=function(a){var l,c,d;function h(){return a.$box.hasClass("fr-code-view")}function p(){return c?c.getValue():l.val()}function u(){h()&&(c.setSize(null,a.opts.height?a.opts.height:"auto"),a.opts.heightMin||a.opts.height?a.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height",a.opts.heightMin||a.opts.height):a.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height",""))}function s(e){l||(!function(){l=m('<textarea class="fr-code" tabIndex="-1">'),a.$wp.append(l),l.attr("dir",a.opts.direction),a.$box.hasClass("fr-basic")||(d=m('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(a.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),a.$box.append(d),a.events.bindClick(a.$box,"a.html-switch",function(){f(!1)}));var e=function(){return!h()};a.events.on("buttons.refresh",e),a.events.on("copy",e,!0),a.events.on("cut",e,!0),a.events.on("paste",e,!0),a.events.on("destroy",g,!0),a.events.on("html.set",function(){h()&&f(!0)}),a.events.on("codeView.update",u),a.events.on("form.submit",function(){h()&&(a.html.set(p()),a.events.trigger("contentChanged",[],!0))},!0)}(),!c&&a.opts.codeMirror?c=a.opts.codeMirror.fromTextArea(l.get(0),a.opts.codeMirrorOptions):a.events.$on(l,"keydown keyup change input",function(){a.opts.height?this.removeAttribute("rows"):(this.rows=1,0===this.value.length?this.style.height="auto":this.style.height=this.scrollHeight+"px")})),a.undo.saveStep(),a.html.cleanEmptyTags(),a.html.cleanWhiteTags(!0),a.core.hasFocus()&&(a.core.isEmpty()||(a.selection.save(),a.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),a.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var t,n,i=a.html.get(!1,!0);if(a.$el.find("span.fr-tmp").remove(),a.$box.toggleClass("fr-code-view",!0),a.core.hasFocus()&&a.$el.blur(),i=(i=i.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM")).replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),a.codeBeautifier&&(i=a.codeBeautifier.run(i,a.opts.codeBeautifierOptions)),c){t=i.indexOf("FROALA-SM"),(n=i.indexOf("FROALA-EM"))<t?t=n:n-=9;var s=(i=i.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).substring(0,t).length-i.substring(0,t).replace(/\n/g,"").length,o=i.substring(0,n).length-i.substring(0,n).replace(/\n/g,"").length;t=i.substring(0,t).length-i.substring(0,i.substring(0,t).lastIndexOf("\n")+1).length,n=i.substring(0,n).length-i.substring(0,i.substring(0,n).lastIndexOf("\n")+1).length,c.setSize(null,a.opts.height?a.opts.height:"auto"),a.opts.heightMin&&a.$box.find(".CodeMirror-scroll").css("min-height",a.opts.heightMin),c.setValue(i),c.focus(),c.setSelection({line:s,ch:t},{line:o,ch:n}),c.refresh(),c.clearHistory()}else{t=i.indexOf("FROALA-SM"),n=i.indexOf("FROALA-EM")-9,a.opts.heightMin&&l.css("min-height",a.opts.heightMin),a.opts.height&&l.css("height",a.opts.height),a.opts.heightMax&&l.css("max-height",a.opts.height||a.opts.heightMax),l.val(i.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var r=m(a.o_doc).scrollTop();l.focus(),l.get(0).setSelectionRange(t,n),m(a.o_doc).scrollTop(r)}a.$tb.find(" > .fr-command").not(e).filter(function(){return a.opts.codeViewKeepActiveButtons.indexOf(m(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),e.addClass("fr-active").attr("aria-pressed",!0),!a.helpers.isMobile()&&a.opts.toolbarInline&&a.toolbar.hide()}function f(e){void 0===e&&(e=!h());var t,n,i=a.$tb.find('.fr-command[data-cmd="html"]');e?(a.popups.hideAll(),s(i)):(a.$box.toggleClass("fr-code-view",!1),t=i,n=p(),a.html.set(n),a.$el.blur(),a.$tb.find(" > .fr-command").not(t).removeClass("fr-disabled").attr("aria-disabled",!1),t.removeClass("fr-active").attr("aria-pressed",!1),a.selection.setAtStart(a.el),a.selection.restore(),a.placeholder.refresh(),a.undo.saveStep())}function g(){h()&&f(!1),c&&c.toTextArea(),l.val("").removeData().remove(),l=null,d&&(d.remove(),d=null)}return{_init:function(){if(!a.$wp)return!1},toggle:f,isActive:h,get:p}},m.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),m.FE.DefineIcon("html",{NAME:"code"})});